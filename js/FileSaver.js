var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e=!a.externalHost&&"download"in d,f=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)},g=a.webkitRequestFileSystem,h=a.requestFileSystem||g||a.mozRequestFileSystem,i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j="application/octet-stream",k=0,l=[],m=function(){for(var b,a=l.length;a--;)b=l[a],"string"==typeof b?c().revokeObjectURL(b):b.remove();l.length=0},n=function(a,b,c){var d,e;for(b=[].concat(b),d=b.length;d--;)if(e=a["on"+b[d]],"function"==typeof e)try{e.call(a,c||a)}catch(f){i(f)}},o=function(b,i){var q,r,x,m=this,o=b.type,p=!1,s=function(){var a=c().createObjectURL(b);return l.push(a),a},t=function(){n(m,"writestart progress write writeend".split(" "))},u=function(){(p||!q)&&(q=s(b)),r?r.location.href=q:window.open(q,"_blank"),m.readyState=m.DONE,t()},v=function(a){return function(){return m.readyState!==m.DONE?a.apply(this,arguments):void 0}},w={create:!0,exclusive:!1};return m.readyState=m.INIT,i||(i="download"),e?(q=s(b),d.href=q,d.download=i,f(d),m.readyState=m.DONE,t(),void 0):(a.chrome&&o&&o!==j&&(x=b.slice||b.webkitSlice,b=x.call(b,0,b.size,j),p=!0),g&&"download"!==i&&(i+=".download"),(o===j||g)&&(r=a),h?(k+=b.size,h(a.TEMPORARY,k,v(function(a){a.root.getDirectory("saved",w,v(function(a){var c=function(){a.getFile(i,w,v(function(a){a.createWriter(v(function(c){c.onwriteend=function(b){r.location.href=a.toURL(),l.push(a),m.readyState=m.DONE,n(m,"writeend",b)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&u()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=m["on"+a]}),c.write(b),m.abort=function(){c.abort(),m.readyState=m.DONE},m.readyState=m.WRITING}),u)}),u)};a.getFile(i,{create:!1},v(function(a){a.remove(),c()}),v(function(a){a.code===a.NOT_FOUND_ERR?c():u()}))}),u)}),u),void 0):(u(),void 0))},p=o.prototype,q=function(a,b){return new o(a,b)};return p.abort=function(){var a=this;a.readyState=a.DONE,n(a,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,a.addEventListener("unload",m,!1),q.unload=function(){m(),a.removeEventListener("unload",m,!1)},q}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs});